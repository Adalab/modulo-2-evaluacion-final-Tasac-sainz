console.log(">> Ready :)");const L=document.querySelector(".product-section_list"),g=document.querySelector(".select-product");let a=JSON.parse(localStorage.getItem("initialProducts"))||[],n=JSON.parse(localStorage.getItem("selectedProducts"))||[];const S=e=>{const t=document.createElement("li");t.classList.add("card-container");const c=document.createElement("img");c.classList.add("card-image"),c.src=e.image;const d=document.createElement("p");d.classList.add("card-title"),d.textContent=e.title;const o=document.createElement("p");o.classList.add("card-price"),o.textContent=e.price+"€";const i=n.find(s=>s.id===e.id),l=document.createElement("button");return l.classList.add("card-button"),l.textContent=i?"Quitar del carrito":"Comprar",i&&l.classList.add("delete-button-card"),l.dataset.id=e.id,l.addEventListener("click",()=>{const s=n.findIndex(u=>u.id===e.id);s===-1?n.push({...e,units:1}):n.splice(s,1),p(),f(a),C()}),t.appendChild(c),t.appendChild(d),t.appendChild(o),t.appendChild(l),t},f=e=>{L.innerHTML="",e.forEach(t=>{const c=S(t);L.appendChild(c)})},b=()=>{a.length===0?fetch("https://fakestoreapi.com/products").then(e=>e.json()).then(e=>{a=e,localStorage.setItem("initialProducts",JSON.stringify(a)),f(a)}):f(a),n&&p()},p=()=>{g.innerHTML="",localStorage.setItem("selectedProducts",JSON.stringify(n)),n.forEach(e=>{let t=document.createElement("li");t.classList.add("select-card");let c=document.createElement("img");c.src=e.image;let d=document.createElement("p");d.textContent=e.title;let o=document.createElement("p");o.textContent=e.price+" €";const i=document.createElement("button");i.classList.add("remove-to-select"),i.title="Eliminar";const l=document.createElement("img");l.src="/images/recycle-bin.png",l.classList.add("delete-icon-img"),i.appendChild(l),i.title="Eliminar del carrito",i.classList.add("remove-to-select");const s=document.createElement("div");s.classList.add("counter-container");const u=document.createElement("button");u.classList.add("count-button"),u.textContent="+";let E=document.createElement("p");E.textContent=e.units;const h=document.createElement("button");h.classList.add("count-button"),h.textContent="-",s.appendChild(h),s.appendChild(E),s.appendChild(u),t.appendChild(i),t.appendChild(c),t.appendChild(d),t.appendChild(o),t.appendChild(s),g.appendChild(t),i.addEventListener("click",()=>{const m=n.findIndex(P=>P.id===e.id);n.splice(m,1);const r=document.querySelector(`.card-button[data-id="${e.id}"]`);r&&(r.textContent="Comprar",r.classList.remove("delete-button-card")),p(),C()}),u.addEventListener("click",()=>{const m=n.findIndex(r=>r.id===e.id);n[m].units++,p(),C()}),h.addEventListener("click",()=>{const m=n.findIndex(r=>r.id===e.id);n[m].units>1&&n[m].units--,p(),C()})})},C=()=>{const e=n.reduce((o,i)=>o+i.price*i.units,0),t=document.querySelector(".total");t.innerHTML="";const c=document.createElement("div");c.classList.add("total-container");const d=document.createElement("p");d.innerHTML="Total carrito = "+e.toFixed(2)+" €",c.appendChild(d),t.appendChild(c)};C();b();const x=document.querySelector(".delete-all-select-prod");x.addEventListener("click",e=>{e.preventDefault(),confirm("¿Seguro que quieres eliminar todos los productos del carrito?")&&(n.length=0,p(),f(a),C())});const v=document.querySelector(".form-section_search-btn"),y=document.querySelector(".form-section_search-input"),I=document.querySelector(".not-available"),q=e=>{e.preventDefault();const t=y.value.toLowerCase(),c=a.filter(d=>d.title.toLowerCase().includes(t));L.innerHTML="",c.length===0?I.innerHTML="Producto no disponible":c.forEach(d=>{const o=S(d);L.appendChild(o)})};v.addEventListener("click",q);const T=document.querySelector(".button-cart"),k=document.querySelector(".aside");T.addEventListener("click",()=>{k.classList.toggle("aside-visible")});
//# sourceMappingURL=main.js.map
